<?xml version="1.0"?>
<pfsense>
  <version>24.03</version>
  <lastchange/>
  
  <!-- ========================================
       SYSTEM CONFIGURATION
       ======================================== -->
  <system>
    <optimization>normal</optimization>
    <hostname>pfsense-group02</hostname>
    <domain>group02.local</domain>
    <dnsserver>8.8.8.8</dnsserver>
    <dnsserver>8.8.4.4</dnsserver>
    <dnsallowoverride>on</dnsallowoverride>
    
    <!-- User Groups -->
    <group>
      <name>admins</name>
      <description>System Administrators</description>
      <scope>system</scope>
      <gid>1999</gid>
      <member>0</member>
      <priv>page-all</priv>
    </group>
    
    <!-- Admin User -->
    <user>
      <name>admin</name>
      <descr>System Administrator</descr>
      <scope>system</scope>
      <groupname>admins</groupname>
      <password>$2y$10$YRVoF4SgskIsrXOvOQjGieB9XqHPRra9R7d80B3BZdbY/j21TQ3C6</password>
      <uid>0</uid>
      <priv>user-shell-access</priv>
    </user>
    
    <nextuid>2000</nextuid>
    <nextgid>2000</nextgid>
    <timezone>America/New_York</timezone>
    <timeservers>pool.ntp.org</timeservers>
    
    <webgui>
      <protocol>https</protocol>
      <loginautocomplete/>
    </webgui>
    
    <disablenatreflection>yes</disablenatreflection>
    <disablechecksumoffloading>yes</disablechecksumoffloading>
    <disablesegmentationoffloading>yes</disablesegmentationoffloading>
    <disablelargereceiveoffloading>yes</disablelargereceiveoffloading>
    
    <ipv6allow/>
    <powerd_ac_mode>hadp</powerd_ac_mode>
    <powerd_battery_mode>hadp</powerd_battery_mode>
    
    <bogons>
      <interval>monthly</interval>
    </bogons>
    
    <kill_states/>
    
    <!-- Enable SSH -->
    <ssh>
      <enable>enabled</enable>
    </ssh>
    
    <maximumstates>10000</maximumstates>
    <maximumtableentries>200000</maximumtableentries>
  </system>
  
  <!-- ========================================
       INTERFACES
       ======================================== -->
  <interfaces>
    <!-- WAN Interface -->
    <wan>
      <enable/>
      <if>vtnet0</if>
      <descr>WAN to Instructor</descr>
      <ipaddr>143.88.0.6</ipaddr>
      <subnet>30</subnet>
      <gateway>WANGW</gateway>
      <blockbogons/>
      <spoofmac/>
    </wan>
    
    <!-- LAN Interface -->
    <lan>
      <enable/>
      <if>vtnet1</if>
      <descr>Student LAN</descr>
      <ipaddr>143.88.2.1</ipaddr>
      <subnet>24</subnet>
    </lan>
  </interfaces>
  
  <!-- ========================================
       GATEWAYS
       ======================================== -->
  <gateways>
    <gateway_item>
      <interface>wan</interface>
      <gateway>143.88.0.5</gateway>
      <name>WANGW</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <interval/>
      <descr>WAN Gateway to Instructor</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
  </gateways>
  
  <!-- ========================================
       DHCP SERVER
       ======================================== -->
  <dhcpd>
    <lan>
      <enable/>
      <range>
        <from>143.88.2.100</from>
        <to>143.88.2.200</to>
      </range>
      <failover_peerip/>
      <defaultleasetime>7200</defaultleasetime>
      <maxleasetime>86400</maxleasetime>
      <netmask/>
      <gateway>143.88.2.1</gateway>
      <domain>group02.local</domain>
      <domainsearchlist/>
      <ddnsdomain/>
      <ddnsdomainprimary/>
      <ddnsdomainkeyname/>
      <ddnsdomainkey/>
      <mac_allow/>
      <mac_deny/>
      <ddnsclientupdates>allow</ddnsclientupdates>
      <tftp/>
      <ldap/>
      <nextserver/>
      <filename/>
      <rootpath/>
      <numberoptions/>
      <dnsserver>8.8.8.8</dnsserver>
      <dnsserver>8.8.4.4</dnsserver>
      <winsserver/>
      <ntpserver/>
      
      <!-- Static DHCP Mappings -->
      <staticmap>
        <mac>52:54:00:02:01:01</mac>
        <ipaddr>143.88.2.10</ipaddr>
        <hostname>kali1</hostname>
        <descr>Kali Linux 1</descr>
      </staticmap>
      <staticmap>
        <mac>52:54:00:02:01:02</mac>
        <ipaddr>143.88.2.11</ipaddr>
        <hostname>kali2</hostname>
        <descr>Kali Linux 2</descr>
      </staticmap>
      <staticmap>
        <mac>52:54:00:02:02:01</mac>
        <ipaddr>143.88.2.13</ipaddr>
        <hostname>ubuntu</hostname>
        <descr>MS3 Ubuntu</descr>
      </staticmap>
      <staticmap>
        <mac>52:54:00:02:02:02</mac>
        <ipaddr>143.88.2.14</ipaddr>
        <hostname>windows</hostname>
        <descr>MS3 Windows</descr>
      </staticmap>
    </lan>
  </dhcpd>
  
  <!-- ========================================
       DHCPV6 (Disabled)
       ======================================== -->
  <dhcpdv6/>
  
  <!-- ========================================
       SNMPD (Disabled)
       ======================================== -->
  <snmpd>
    <syslocation/>
    <syscontact/>
    <rocommunity>public</rocommunity>
  </snmpd>
  
  <!-- ========================================
       NAT - DISABLED FOR TRANSPARENT ROUTING
       ======================================== -->
  <nat>
    <outbound>
      <mode>disabled</mode>
    </outbound>
    <rule/>
  </nat>
  
  <!-- ========================================
       FIREWALL FILTER RULES
       ======================================== -->
  <filter>
    <!-- Anti-Lockout Rule -->
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Anti-Lockout Rule</descr>
      <interface>lan</interface>
      <tracker>0100000101</tracker>
      <source>
        <any/>
      </source>
      <destination>
        <network>(self)</network>
        <port>443</port>
      </destination>
    </rule>
    
    <!-- WAN Rules: Allow All Inbound -->
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all WAN inbound</descr>
      <interface>wan</interface>
      <tracker>0100000102</tracker>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    
    <!-- LAN Rules: Allow All Outbound -->
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all LAN to any</descr>
      <interface>lan</interface>
      <tracker>0100000103</tracker>
      <source>
        <network>lan</network>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
  </filter>
  
  <!-- ========================================
       SYSLOG
       ======================================== -->
  <syslog>
    <filterdescriptions>1</filterdescriptions>
  </syslog>
  
  <!-- ========================================
       STATIC ROUTES (None needed for students)
       ======================================== -->
  <staticroutes/>
  
  <!-- ========================================
       LOAD BALANCER (Disabled)
       ======================================== -->
  <load_balancer>
    <monitor_type>
      <name>ICMP</name>
      <type>icmp</type>
      <descr>ICMP</descr>
      <options/>
    </monitor_type>
    <monitor_type>
      <name>TCP</name>
      <type>tcp</type>
      <descr>Generic TCP</descr>
      <options/>
    </monitor_type>
    <monitor_type>
      <name>HTTP</name>
      <type>http</type>
      <descr>Generic HTTP</descr>
      <options>
        <path>/</path>
        <host/>
        <code>200</code>
      </options>
    </monitor_type>
    <monitor_type>
      <name>HTTPS</name>
      <type>https</type>
      <descr>Generic HTTPS</descr>
      <options>
        <path>/</path>
        <host/>
        <code>200</code>
      </options>
    </monitor_type>
    <monitor_type>
      <name>SMTP</name>
      <type>send</type>
      <descr>Generic SMTP</descr>
      <options>
        <send/>
        <expect>220 *</expect>
      </options>
    </monitor_type>
  </load_balancer>
  
  <!-- ========================================
       WIDGETS (Dashboard)
       ======================================== -->
  <widgets>
    <sequence>system_information:col1:show,interfaces:col2:show</sequence>
  </widgets>
  
  <!-- ========================================
       REVISION (Config tracking)
       ======================================== -->
  <revision>
    <time>1765900036</time>
    <description>Ansible Generated - Group 2</description>
    <username>admin</username>
  </revision>
</pfsense>