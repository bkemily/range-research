<?xml version="1.0"?>
<pfsense>
  <version>24.03</version>
  <lastchange/>
  
  <!-- ========================================
       SYSTEM CONFIGURATION
       ======================================== -->
  <system>
    <optimization>normal</optimization>
    <hostname>pfsense-instructor</hostname>
    <domain>instructor.local</domain>
    <dnsserver>8.8.8.8</dnsserver>
    <dnsserver>8.8.4.4</dnsserver>
    <dnsallowoverride>on</dnsallowoverride>
    
    <group>
      <name>admins</name>
      <description>System Administrators</description>
      <scope>system</scope>
      <gid>1999</gid>
      <member>0</member>
      <priv>page-all</priv>
    </group>
    
    <user>
      <name>admin</name>
      <descr>System Administrator</descr>
      <scope>system</scope>
      <groupname>admins</groupname>
      <password>$2y$10$YRVoF4SgskIsrXOvOQjGieB9XqHPRra9R7d80B3BZdbY/j21TQ3C6</password>
      <uid>0</uid>
      <priv>user-shell-access</priv>
    </user>
    
    <nextuid>2000</nextuid>
    <nextgid>2000</nextgid>
    <timezone>America/New_York</timezone>
    <timeservers>pool.ntp.org</timeservers>
    
    <webgui>
      <protocol>https</protocol>
    </webgui>
    
    <disablenatreflection>yes</disablenatreflection>
    <disablechecksumoffloading>yes</disablechecksumoffloading>
    <disablesegmentationoffloading>yes</disablesegmentationoffloading>
    <disablelargereceiveoffloading>yes</disablelargereceiveoffloading>
    
    <ssh>
      <enable>enabled</enable>
    </ssh>
    
    <maximumstates>50000</maximumstates>
    <maximumtableentries>400000</maximumtableentries>
  </system>
  
  <!-- ========================================
       INTERFACES
       ======================================== -->
  <interfaces>
    <!-- WAN: No IP assignment -->
    <wan>
      <enable/>
      <if>vtnet0</if>
      <descr>WAN Bridge</descr>
      <spoofmac/>
    </wan>
    
    <!-- LAN: Instructor Network -->
    <lan>
      <enable/>
      <if>vtnet1</if>
      <descr>Instructor LAN</descr>
      <ipaddr>143.88.255.1</ipaddr>
      <subnet>24</subnet>
    </lan>
    
    <!-- OPT Interfaces for Student Groups -->
    <opt1>
      <enable/>
      <if>vtnet2</if>
      <descr>Group 01 WAN</descr>
      <ipaddr>143.88.0.1</ipaddr>
      <subnet>30</subnet>
    </opt1>
    <opt2>
      <enable/>
      <if>vtnet3</if>
      <descr>Group 02 WAN</descr>
      <ipaddr>143.88.0.5</ipaddr>
      <subnet>30</subnet>
    </opt2>
    <opt3>
      <enable/>
      <if>vtnet4</if>
      <descr>Group 03 WAN</descr>
      <ipaddr>143.88.0.9</ipaddr>
      <subnet>30</subnet>
    </opt3>
    <opt4>
      <enable/>
      <if>vtnet5</if>
      <descr>Group 04 WAN</descr>
      <ipaddr>143.88.0.13</ipaddr>
      <subnet>30</subnet>
    </opt4>
    <opt5>
      <enable/>
      <if>vtnet6</if>
      <descr>Group 05 WAN</descr>
      <ipaddr>143.88.0.17</ipaddr>
      <subnet>30</subnet>
    </opt5>
    <opt6>
      <enable/>
      <if>vtnet7</if>
      <descr>Group 06 WAN</descr>
      <ipaddr>143.88.0.21</ipaddr>
      <subnet>30</subnet>
    </opt6>
    <opt7>
      <enable/>
      <if>vtnet8</if>
      <descr>Group 07 WAN</descr>
      <ipaddr>143.88.0.25</ipaddr>
      <subnet>30</subnet>
    </opt7>
    <opt8>
      <enable/>
      <if>vtnet9</if>
      <descr>Group 08 WAN</descr>
      <ipaddr>143.88.0.29</ipaddr>
      <subnet>30</subnet>
    </opt8>
    <opt9>
      <enable/>
      <if>vtnet10</if>
      <descr>Group 09 WAN</descr>
      <ipaddr>143.88.0.33</ipaddr>
      <subnet>30</subnet>
    </opt9>
    <opt10>
      <enable/>
      <if>vtnet11</if>
      <descr>Group 10 WAN</descr>
      <ipaddr>143.88.0.37</ipaddr>
      <subnet>30</subnet>
    </opt10>
    <opt11>
      <enable/>
      <if>vtnet12</if>
      <descr>Group 11 WAN</descr>
      <ipaddr>143.88.0.41</ipaddr>
      <subnet>30</subnet>
    </opt11>
    <opt12>
      <enable/>
      <if>vtnet13</if>
      <descr>Group 12 WAN</descr>
      <ipaddr>143.88.0.45</ipaddr>
      <subnet>30</subnet>
    </opt12>
    <opt13>
      <enable/>
      <if>vtnet14</if>
      <descr>Group 13 WAN</descr>
      <ipaddr>143.88.0.49</ipaddr>
      <subnet>30</subnet>
    </opt13>
    <opt14>
      <enable/>
      <if>vtnet15</if>
      <descr>Group 14 WAN</descr>
      <ipaddr>143.88.0.53</ipaddr>
      <subnet>30</subnet>
    </opt14>
    <opt15>
      <enable/>
      <if>vtnet16</if>
      <descr>Group 15 WAN</descr>
      <ipaddr>143.88.0.57</ipaddr>
      <subnet>30</subnet>
    </opt15>
  </interfaces>
  
  <!-- ========================================
       GATEWAYS FOR EACH OPT INTERFACE
       ======================================== -->
  <gateways>
    <gateway_item>
      <interface>opt1</interface>
      <gateway>143.88.0.2</gateway>
      <name>GW_OPT1</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 01</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt2</interface>
      <gateway>143.88.0.6</gateway>
      <name>GW_OPT2</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 02</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt3</interface>
      <gateway>143.88.0.10</gateway>
      <name>GW_OPT3</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 03</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt4</interface>
      <gateway>143.88.0.14</gateway>
      <name>GW_OPT4</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 04</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt5</interface>
      <gateway>143.88.0.18</gateway>
      <name>GW_OPT5</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 05</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt6</interface>
      <gateway>143.88.0.22</gateway>
      <name>GW_OPT6</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 06</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt7</interface>
      <gateway>143.88.0.26</gateway>
      <name>GW_OPT7</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 07</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt8</interface>
      <gateway>143.88.0.30</gateway>
      <name>GW_OPT8</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 08</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt9</interface>
      <gateway>143.88.0.34</gateway>
      <name>GW_OPT9</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 09</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt10</interface>
      <gateway>143.88.0.38</gateway>
      <name>GW_OPT10</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 10</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt11</interface>
      <gateway>143.88.0.42</gateway>
      <name>GW_OPT11</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 11</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt12</interface>
      <gateway>143.88.0.46</gateway>
      <name>GW_OPT12</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 12</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt13</interface>
      <gateway>143.88.0.50</gateway>
      <name>GW_OPT13</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 13</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt14</interface>
      <gateway>143.88.0.54</gateway>
      <name>GW_OPT14</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 14</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
    <gateway_item>
      <interface>opt15</interface>
      <gateway>143.88.0.58</gateway>
      <name>GW_OPT15</name>
      <weight>1</weight>
      <ipprotocol>inet</ipprotocol>
      <descr>Gateway to Group 15</descr>
      <monitor_disable>1</monitor_disable>
    </gateway_item>
  </gateways>
  
  <!-- ========================================
       STATIC ROUTES TO STUDENT LANS
       ======================================== -->
  <staticroutes>
    <route>
      <network>143.88.1.0/24</network>
      <gateway>GW_OPT1</gateway>
      <descr>Route to Group 01 LAN</descr>
    </route>
    <route>
      <network>143.88.2.0/24</network>
      <gateway>GW_OPT2</gateway>
      <descr>Route to Group 02 LAN</descr>
    </route>
    <route>
      <network>143.88.3.0/24</network>
      <gateway>GW_OPT3</gateway>
      <descr>Route to Group 03 LAN</descr>
    </route>
    <route>
      <network>143.88.4.0/24</network>
      <gateway>GW_OPT4</gateway>
      <descr>Route to Group 04 LAN</descr>
    </route>
    <route>
      <network>143.88.5.0/24</network>
      <gateway>GW_OPT5</gateway>
      <descr>Route to Group 05 LAN</descr>
    </route>
    <route>
      <network>143.88.6.0/24</network>
      <gateway>GW_OPT6</gateway>
      <descr>Route to Group 06 LAN</descr>
    </route>
    <route>
      <network>143.88.7.0/24</network>
      <gateway>GW_OPT7</gateway>
      <descr>Route to Group 07 LAN</descr>
    </route>
    <route>
      <network>143.88.8.0/24</network>
      <gateway>GW_OPT8</gateway>
      <descr>Route to Group 08 LAN</descr>
    </route>
    <route>
      <network>143.88.9.0/24</network>
      <gateway>GW_OPT9</gateway>
      <descr>Route to Group 09 LAN</descr>
    </route>
    <route>
      <network>143.88.10.0/24</network>
      <gateway>GW_OPT10</gateway>
      <descr>Route to Group 10 LAN</descr>
    </route>
    <route>
      <network>143.88.11.0/24</network>
      <gateway>GW_OPT11</gateway>
      <descr>Route to Group 11 LAN</descr>
    </route>
    <route>
      <network>143.88.12.0/24</network>
      <gateway>GW_OPT12</gateway>
      <descr>Route to Group 12 LAN</descr>
    </route>
    <route>
      <network>143.88.13.0/24</network>
      <gateway>GW_OPT13</gateway>
      <descr>Route to Group 13 LAN</descr>
    </route>
    <route>
      <network>143.88.14.0/24</network>
      <gateway>GW_OPT14</gateway>
      <descr>Route to Group 14 LAN</descr>
    </route>
    <route>
      <network>143.88.15.0/24</network>
      <gateway>GW_OPT15</gateway>
      <descr>Route to Group 15 LAN</descr>
    </route>
  </staticroutes>
  
  <!-- ========================================
       DHCP SERVER (Instructor LAN Only)
       ======================================== -->
  <dhcpd>
    <lan>
      <enable/>
      <range>
        <from>143.88.255.100</from>
        <to>143.88.255.200</to>
      </range>
      <defaultleasetime>7200</defaultleasetime>
      <maxleasetime>86400</maxleasetime>
      <gateway>143.88.255.1</gateway>
      <domain>instructor.local</domain>
      <dnsserver>8.8.8.8</dnsserver>
      <dnsserver>8.8.4.4</dnsserver>
      
      <!-- Static Mappings -->
      <staticmap>
        <mac>52:54:00:FF:00:01</mac>
        <ipaddr>143.88.255.10</ipaddr>
        <hostname>kali-instructor</hostname>
        <descr>Instructor Kali</descr>
      </staticmap>
    </lan>
    <opt1>
      <!-- DHCP disabled on OPT interfaces -->
    </opt1>
    <opt2>
      <!-- DHCP disabled on OPT interfaces -->
    </opt2>
    <opt3>
      <!-- DHCP disabled on OPT interfaces -->
    </opt3>
    <opt4>
      <!-- DHCP disabled on OPT interfaces -->
    </opt4>
    <opt5>
      <!-- DHCP disabled on OPT interfaces -->
    </opt5>
    <opt6>
      <!-- DHCP disabled on OPT interfaces -->
    </opt6>
    <opt7>
      <!-- DHCP disabled on OPT interfaces -->
    </opt7>
    <opt8>
      <!-- DHCP disabled on OPT interfaces -->
    </opt8>
    <opt9>
      <!-- DHCP disabled on OPT interfaces -->
    </opt9>
    <opt10>
      <!-- DHCP disabled on OPT interfaces -->
    </opt10>
    <opt11>
      <!-- DHCP disabled on OPT interfaces -->
    </opt11>
    <opt12>
      <!-- DHCP disabled on OPT interfaces -->
    </opt12>
    <opt13>
      <!-- DHCP disabled on OPT interfaces -->
    </opt13>
    <opt14>
      <!-- DHCP disabled on OPT interfaces -->
    </opt14>
    <opt15>
      <!-- DHCP disabled on OPT interfaces -->
    </opt15>
  </dhcpd>
  
  <dhcpdv6/>
  <snmpd>
    <syslocation/>
    <syscontact/>
    <rocommunity>public</rocommunity>
  </snmpd>
  
  <!-- ========================================
       NAT - DISABLED
       ======================================== -->
  <nat>
    <outbound>
      <mode>disabled</mode>
    </outbound>
  </nat>
  
  <!-- ========================================
       FIREWALL FILTER RULES
       ======================================== -->
  <filter>
    <!-- Anti-Lockout -->
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Anti-Lockout Rule</descr>
      <interface>lan</interface>
      <source>
        <any/>
      </source>
      <destination>
        <network>(self)</network>
        <port>443</port>
      </destination>
    </rule>
    
    <!-- LAN: Allow All -->
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all LAN</descr>
      <interface>lan</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    
    <!-- OPT Interfaces: Allow All -->
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 01</descr>
      <interface>opt1</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 02</descr>
      <interface>opt2</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 03</descr>
      <interface>opt3</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 04</descr>
      <interface>opt4</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 05</descr>
      <interface>opt5</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 06</descr>
      <interface>opt6</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 07</descr>
      <interface>opt7</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 08</descr>
      <interface>opt8</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 09</descr>
      <interface>opt9</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 10</descr>
      <interface>opt10</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 11</descr>
      <interface>opt11</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 12</descr>
      <interface>opt12</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 13</descr>
      <interface>opt13</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 14</descr>
      <interface>opt14</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
    <rule>
      <type>pass</type>
      <ipprotocol>inet</ipprotocol>
      <descr>Allow all Group 15</descr>
      <interface>opt15</interface>
      <source>
        <any/>
      </source>
      <destination>
        <any/>
      </destination>
    </rule>
  </filter>
  
  <syslog>
    <filterdescriptions>1</filterdescriptions>
  </syslog>
  
  <load_balancer>
    <monitor_type>
      <name>ICMP</name>
      <type>icmp</type>
      <descr>ICMP</descr>
    </monitor_type>
  </load_balancer>
  
  <widgets>
    <sequence>system_information:col1:show,interfaces:col2:show</sequence>
  </widgets>
  
  <revision>
    <time>1765900036</time>
    <description>Ansible Generated - Instructor pfSense</description>
    <username>admin</username>
  </revision>
</pfsense>